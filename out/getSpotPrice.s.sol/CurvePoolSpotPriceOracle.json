{"abi":[{"type":"function","name":"getSpotPrice","inputs":[{"name":"token","type":"address","internalType":"address"},{"name":"pool","type":"address","internalType":"address"},{"name":"quoteToken","type":"address","internalType":"address"}],"outputs":[{"name":"price","type":"uint256","internalType":"uint256"}],"stateMutability":"nonpayable"}],"bytecode":{"object":"0x608060405234801561001057600080fd5b5061037a806100206000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c806375075ad514610030575b600080fd5b61004361003e366004610288565b610055565b60405190815260200160405180910390f35b60008281610063828761016a565b90506000610071838661016a565b905080600f0b82600f0b036100d95760405162461bcd60e51b815260206004820152602360248201527f53616d6520746f6b656e2070726f766964656420666f7220626f746820696e7060448201526275747360e81b60648201526084015b60405180910390fd5b604051635e0d443f60e01b8152600f83810b600483015282900b6024820152670de0b6b3a764000060448201819052906001600160a01b03851690635e0d443f90606401602060405180830381865afa15801561013a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061015e91906102d3565b98975050505050505050565b6000805b6008816001600160801b031610156102225760405163c661065760e01b81526001600160801b03821660048201526001600160a01b0385169063c661065790602401602060405180830381865afa9250505080156101e9575060408051601f3d908101601f191682019092526101e6918101906102ec565b60015b1561022257836001600160a01b0316816001600160a01b03160361020f5750905061026a565b508061021a81610310565b91505061016e565b60405162461bcd60e51b815260206004820152601760248201527f546f6b656e206e6f7420666f756e6420696e20706f6f6c00000000000000000060448201526064016100d0565b92915050565b6001600160a01b038116811461028557600080fd5b50565b60008060006060848603121561029d57600080fd5b83356102a881610270565b925060208401356102b881610270565b915060408401356102c881610270565b809150509250925092565b6000602082840312156102e557600080fd5b5051919050565b6000602082840312156102fe57600080fd5b815161030981610270565b9392505050565b60006001600160801b0380831681810361033a57634e487b7160e01b600052601160045260246000fd5b600101939250505056fea2646970667358221220a0717f31d5ea3b6af5ab8e64e6fb069edf729b20b1f449ef9cafc683e14ab5c164736f6c63430008170033","sourceMap":"420:1202:20:-:0;;;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x608060405234801561001057600080fd5b506004361061002b5760003560e01c806375075ad514610030575b600080fd5b61004361003e366004610288565b610055565b60405190815260200160405180910390f35b60008281610063828761016a565b90506000610071838661016a565b905080600f0b82600f0b036100d95760405162461bcd60e51b815260206004820152602360248201527f53616d6520746f6b656e2070726f766964656420666f7220626f746820696e7060448201526275747360e81b60648201526084015b60405180910390fd5b604051635e0d443f60e01b8152600f83810b600483015282900b6024820152670de0b6b3a764000060448201819052906001600160a01b03851690635e0d443f90606401602060405180830381865afa15801561013a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061015e91906102d3565b98975050505050505050565b6000805b6008816001600160801b031610156102225760405163c661065760e01b81526001600160801b03821660048201526001600160a01b0385169063c661065790602401602060405180830381865afa9250505080156101e9575060408051601f3d908101601f191682019092526101e6918101906102ec565b60015b1561022257836001600160a01b0316816001600160a01b03160361020f5750905061026a565b508061021a81610310565b91505061016e565b60405162461bcd60e51b815260206004820152601760248201527f546f6b656e206e6f7420666f756e6420696e20706f6f6c00000000000000000060448201526064016100d0565b92915050565b6001600160a01b038116811461028557600080fd5b50565b60008060006060848603121561029d57600080fd5b83356102a881610270565b925060208401356102b881610270565b915060408401356102c881610270565b809150509250925092565b6000602082840312156102e557600080fd5b5051919050565b6000602082840312156102fe57600080fd5b815161030981610270565b9392505050565b60006001600160801b0380831681810361033a57634e487b7160e01b600052601160045260246000fd5b600101939250505056fea2646970667358221220a0717f31d5ea3b6af5ab8e64e6fb069edf729b20b1f449ef9cafc683e14ab5c164736f6c63430008170033","sourceMap":"420:1202:20:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;625:540;;;;;;:::i;:::-;;:::i;:::-;;;830:25:24;;;818:2;803:18;625:540:20;;;;;;;;753:13;812:4;753:13;838:32;812:4;864:5;838:14;:32::i;:::-;827:43;;880:8;891:37;906:9;917:10;891:14;:37::i;:::-;880:48;;952:1;947:6;;:1;:6;;;939:54;;;;-1:-1:-1;;;939:54:20;;1068:2:24;939:54:20;;;1050:21:24;1107:2;1087:18;;;1080:30;1146:34;1126:18;;;1119:62;-1:-1:-1;;;1197:18:24;;;1190:33;1240:19;;939:54:20;;;;;;;;;1128:30;;-1:-1:-1;;;1128:30:20;;1497:2:24;1486:22;;;1128:30:20;;;1468:41:24;1545:22;;;1525:18;;;1518:50;1103:7:20;1584:18:24;;;1577:34;;;1103:7:20;-1:-1:-1;;;;;1128:16:20;;;;;1441:18:24;;1128:30:20;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;1121:37;625:540;-1:-1:-1;;;;;;;;625:540:20:o;1171:449::-;1250:6;;1297:274;1314:1;1304:7;-1:-1:-1;;;;;1304:11:20;;1297:274;;;1336:19;;-1:-1:-1;;;1336:19:20;;-1:-1:-1;;;;;1975:47:24;;1336:19:20;;;1957:66:24;-1:-1:-1;;;;;1336:10:20;;;;;1930:18:24;;1336:19:20;;;;;;;;;;;;;;;;;;-1:-1:-1;1336:19:20;;;;;;;;-1:-1:-1;;1336:19:20;;;;;;;;;;;;:::i;:::-;;;1332:206;1518:5;1332:206;1409:5;-1:-1:-1;;;;;1401:13:20;:4;-1:-1:-1;;;;;1401:13:20;;1397:82;;-1:-1:-1;1452:7:20;-1:-1:-1;1438:22:20;;1397:82;1356:137;1551:9;;;;:::i;:::-;;;;1297:274;;;1580:33;;-1:-1:-1;;;1580:33:20;;2820:2:24;1580:33:20;;;2802:21:24;2859:2;2839:18;;;2832:30;2898:25;2878:18;;;2871:53;2941:18;;1580:33:20;2618:347:24;1171:449:20;;;;;:::o;14:131:24:-;-1:-1:-1;;;;;89:31:24;;79:42;;69:70;;135:1;132;125:12;69:70;14:131;:::o;150:529::-;227:6;235;243;296:2;284:9;275:7;271:23;267:32;264:52;;;312:1;309;302:12;264:52;351:9;338:23;370:31;395:5;370:31;:::i;:::-;420:5;-1:-1:-1;477:2:24;462:18;;449:32;490:33;449:32;490:33;:::i;:::-;542:7;-1:-1:-1;601:2:24;586:18;;573:32;614:33;573:32;614:33;:::i;:::-;666:7;656:17;;;150:529;;;;;:::o;1622:184::-;1692:6;1745:2;1733:9;1724:7;1720:23;1716:32;1713:52;;;1761:1;1758;1751:12;1713:52;-1:-1:-1;1784:16:24;;1622:184;-1:-1:-1;1622:184:24:o;2034:251::-;2104:6;2157:2;2145:9;2136:7;2132:23;2128:32;2125:52;;;2173:1;2170;2163:12;2125:52;2205:9;2199:16;2224:31;2249:5;2224:31;:::i;:::-;2274:5;2034:251;-1:-1:-1;;;2034:251:24:o;2290:323::-;2329:3;-1:-1:-1;;;;;2426:2:24;2419:5;2415:14;2453:2;2444:7;2441:15;2438:138;;2498:10;2493:3;2489:20;2486:1;2479:31;2533:4;2530:1;2523:15;2561:4;2558:1;2551:15;2438:138;2605:1;2592:15;;2290:323;-1:-1:-1;;;2290:323:24:o","linkReferences":{}},"methodIdentifiers":{"getSpotPrice(address,address,address)":"75075ad5"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.23+commit.f704f362\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"pool\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"quoteToken\",\"type\":\"address\"}],\"name\":\"getSpotPrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"price\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"getSpotPrice(address,address,address)\":{\"params\":{\"pool\":\"The liquidity pool to use for the price retrieval\",\"quoteToken\":\"Quote token\",\"token\":\"The token to get the spot price of\"},\"returns\":{\"price\":\"The spot price of the token     \"}}},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"getSpotPrice(address,address,address)\":{\"notice\":\"Retrieve the spot price for a token in a specified quote currency utilizing a specific liquidity pool\"}},\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/getSpotPrice.s.sol\":\"CurvePoolSpotPriceOracle\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/\",\":ds-test/=lib/forge-std/lib/ds-test/src/\",\":erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\"]},\"sources\":{\"src/getSpotPrice.s.sol\":{\"keccak256\":\"0x5ee415030178a6e0ede74a9a843f06b796134c24019a56ab54f4fe54fc7a81ac\",\"license\":\"UNLICENSED\",\"urls\":[\"bzz-raw://ffbb867d9d9de991e73aba9d90bb77bfc27fa003fbb698dbed84f279d4f845bd\",\"dweb:/ipfs/QmfQtrAsGqK6TPWhkhuHwh4yN9JrhisfdEnBbVuKjyvkwa\"]},\"src/interfaces/ICurvePool.sol\":{\"keccak256\":\"0x9f6e43178cdc17521e58452070ad94c8c0d063128490949e431b671817854b73\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://ff2fc6b4a3179acdff40c1e067a8e20bffdfbd482f5c30acb4db4cf6839d636c\",\"dweb:/ipfs/QmQ8ab3kTbWA9JvnMk267HsQrjk9FmCpM4wYFyW1YKCZ78\"]},\"src/interfaces/ISpotPriceOracle.sol\":{\"keccak256\":\"0xe9360f14b103cf7515f34f555f5edf1bec5d778ee85938a2b4e3258ffbfba5f7\",\"license\":\"UNLICENSED\",\"urls\":[\"bzz-raw://cfa3d8db92e7c171634c0831b590e1efcfb951388861996854f9afa93cfa8b2d\",\"dweb:/ipfs/QmdwTmfohSux6KRMw9NGFUnbvueYTGHMGLTm5seRUMFyhb\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.23+commit.f704f362"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"address","name":"pool","type":"address"},{"internalType":"address","name":"quoteToken","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"getSpotPrice","outputs":[{"internalType":"uint256","name":"price","type":"uint256"}]}],"devdoc":{"kind":"dev","methods":{"getSpotPrice(address,address,address)":{"params":{"pool":"The liquidity pool to use for the price retrieval","quoteToken":"Quote token","token":"The token to get the spot price of"},"returns":{"price":"The spot price of the token     "}}},"version":1},"userdoc":{"kind":"user","methods":{"getSpotPrice(address,address,address)":{"notice":"Retrieve the spot price for a token in a specified quote currency utilizing a specific liquidity pool"}},"version":1}},"settings":{"remappings":["@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/","ds-test/=lib/forge-std/lib/ds-test/src/","erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/","forge-std/=lib/forge-std/src/","openzeppelin-contracts/=lib/openzeppelin-contracts/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/getSpotPrice.s.sol":"CurvePoolSpotPriceOracle"},"libraries":{}},"sources":{"src/getSpotPrice.s.sol":{"keccak256":"0x5ee415030178a6e0ede74a9a843f06b796134c24019a56ab54f4fe54fc7a81ac","urls":["bzz-raw://ffbb867d9d9de991e73aba9d90bb77bfc27fa003fbb698dbed84f279d4f845bd","dweb:/ipfs/QmfQtrAsGqK6TPWhkhuHwh4yN9JrhisfdEnBbVuKjyvkwa"],"license":"UNLICENSED"},"src/interfaces/ICurvePool.sol":{"keccak256":"0x9f6e43178cdc17521e58452070ad94c8c0d063128490949e431b671817854b73","urls":["bzz-raw://ff2fc6b4a3179acdff40c1e067a8e20bffdfbd482f5c30acb4db4cf6839d636c","dweb:/ipfs/QmQ8ab3kTbWA9JvnMk267HsQrjk9FmCpM4wYFyW1YKCZ78"],"license":"MIT"},"src/interfaces/ISpotPriceOracle.sol":{"keccak256":"0xe9360f14b103cf7515f34f555f5edf1bec5d778ee85938a2b4e3258ffbfba5f7","urls":["bzz-raw://cfa3d8db92e7c171634c0831b590e1efcfb951388861996854f9afa93cfa8b2d","dweb:/ipfs/QmdwTmfohSux6KRMw9NGFUnbvueYTGHMGLTm5seRUMFyhb"],"license":"UNLICENSED"}},"version":1},"ast":{"absolutePath":"src/getSpotPrice.s.sol","id":44669,"exportedSymbols":{"CurvePoolSpotPriceOracle":[44668],"ICurvePool":[45003],"ISpotPriceOracle":[45019]},"nodeType":"SourceUnit","src":"39:1584:20","nodes":[{"id":44561,"nodeType":"PragmaDirective","src":"39:24:20","nodes":[],"literals":["solidity","^","0.8",".23"]},{"id":44562,"nodeType":"ImportDirective","src":"337:37:20","nodes":[],"absolutePath":"src/interfaces/ICurvePool.sol","file":"./interfaces/ICurvePool.sol","nameLocation":"-1:-1:-1","scope":44669,"sourceUnit":45004,"symbolAliases":[],"unitAlias":""},{"id":44563,"nodeType":"ImportDirective","src":"375:43:20","nodes":[],"absolutePath":"src/interfaces/ISpotPriceOracle.sol","file":"./interfaces/ISpotPriceOracle.sol","nameLocation":"-1:-1:-1","scope":44669,"sourceUnit":45020,"symbolAliases":[],"unitAlias":""},{"id":44668,"nodeType":"ContractDefinition","src":"420:1202:20","nodes":[{"id":44617,"nodeType":"FunctionDefinition","src":"625:540:20","nodes":[],"body":{"id":44616,"nodeType":"Block","src":"768:397:20","nodes":[],"statements":[{"assignments":[44579],"declarations":[{"constant":false,"id":44579,"mutability":"mutable","name":"curvePool","nameLocation":"789:9:20","nodeType":"VariableDeclaration","scope":44616,"src":"778:20:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_ICurvePool_$45003","typeString":"contract ICurvePool"},"typeName":{"id":44578,"nodeType":"UserDefinedTypeName","pathNode":{"id":44577,"name":"ICurvePool","nameLocations":["778:10:20"],"nodeType":"IdentifierPath","referencedDeclaration":45003,"src":"778:10:20"},"referencedDeclaration":45003,"src":"778:10:20","typeDescriptions":{"typeIdentifier":"t_contract$_ICurvePool_$45003","typeString":"contract ICurvePool"}},"visibility":"internal"}],"id":44583,"initialValue":{"arguments":[{"id":44581,"name":"pool","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44569,"src":"812:4:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":44580,"name":"ICurvePool","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":45003,"src":"801:10:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_ICurvePool_$45003_$","typeString":"type(contract ICurvePool)"}},"id":44582,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"801:16:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_ICurvePool_$45003","typeString":"contract ICurvePool"}},"nodeType":"VariableDeclarationStatement","src":"778:39:20"},{"assignments":[44585],"declarations":[{"constant":false,"id":44585,"mutability":"mutable","name":"i","nameLocation":"834:1:20","nodeType":"VariableDeclaration","scope":44616,"src":"827:8:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"},"typeName":{"id":44584,"name":"int128","nodeType":"ElementaryTypeName","src":"827:6:20","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"visibility":"internal"}],"id":44590,"initialValue":{"arguments":[{"id":44587,"name":"curvePool","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44579,"src":"853:9:20","typeDescriptions":{"typeIdentifier":"t_contract$_ICurvePool_$45003","typeString":"contract ICurvePool"}},{"id":44588,"name":"token","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44567,"src":"864:5:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_ICurvePool_$45003","typeString":"contract ICurvePool"},{"typeIdentifier":"t_address","typeString":"address"}],"id":44586,"name":"findTokenIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44667,"src":"838:14:20","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_contract$_ICurvePool_$45003_$_t_address_$returns$_t_int128_$","typeString":"function (contract ICurvePool,address) view returns (int128)"}},"id":44589,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"838:32:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"nodeType":"VariableDeclarationStatement","src":"827:43:20"},{"assignments":[44592],"declarations":[{"constant":false,"id":44592,"mutability":"mutable","name":"j","nameLocation":"887:1:20","nodeType":"VariableDeclaration","scope":44616,"src":"880:8:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"},"typeName":{"id":44591,"name":"int128","nodeType":"ElementaryTypeName","src":"880:6:20","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"visibility":"internal"}],"id":44597,"initialValue":{"arguments":[{"id":44594,"name":"curvePool","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44579,"src":"906:9:20","typeDescriptions":{"typeIdentifier":"t_contract$_ICurvePool_$45003","typeString":"contract ICurvePool"}},{"id":44595,"name":"quoteToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44571,"src":"917:10:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_ICurvePool_$45003","typeString":"contract ICurvePool"},{"typeIdentifier":"t_address","typeString":"address"}],"id":44593,"name":"findTokenIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44667,"src":"891:14:20","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_contract$_ICurvePool_$45003_$_t_address_$returns$_t_int128_$","typeString":"function (contract ICurvePool,address) view returns (int128)"}},"id":44596,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"891:37:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"nodeType":"VariableDeclarationStatement","src":"880:48:20"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_int128","typeString":"int128"},"id":44601,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44599,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44585,"src":"947:1:20","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":44600,"name":"j","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44592,"src":"952:1:20","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"src":"947:6:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"53616d6520746f6b656e2070726f766964656420666f7220626f746820696e70757473","id":44602,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"955:37:20","typeDescriptions":{"typeIdentifier":"t_stringliteral_469daa292242f845a3e5e5e7ea6e0abb6939c4d847db2ea38161da86dc957a9a","typeString":"literal_string \"Same token provided for both inputs\""},"value":"Same token provided for both inputs"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_469daa292242f845a3e5e5e7ea6e0abb6939c4d847db2ea38161da86dc957a9a","typeString":"literal_string \"Same token provided for both inputs\""}],"id":44598,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"939:7:20","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":44603,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"939:54:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":44604,"nodeType":"ExpressionStatement","src":"939:54:20"},{"assignments":[44606],"declarations":[{"constant":false,"id":44606,"mutability":"mutable","name":"amount","nameLocation":"1094:6:20","nodeType":"VariableDeclaration","scope":44616,"src":"1086:14:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44605,"name":"uint256","nodeType":"ElementaryTypeName","src":"1086:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":44608,"initialValue":{"hexValue":"31","id":44607,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1103:7:20","subdenomination":"ether","typeDescriptions":{"typeIdentifier":"t_rational_1000000000000000000_by_1","typeString":"int_const 1000000000000000000"},"value":"1"},"nodeType":"VariableDeclarationStatement","src":"1086:24:20"},{"expression":{"arguments":[{"id":44611,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44585,"src":"1145:1:20","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},{"id":44612,"name":"j","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44592,"src":"1148:1:20","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},{"id":44613,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44606,"src":"1151:6:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int128","typeString":"int128"},{"typeIdentifier":"t_int128","typeString":"int128"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":44609,"name":"curvePool","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44579,"src":"1128:9:20","typeDescriptions":{"typeIdentifier":"t_contract$_ICurvePool_$45003","typeString":"contract ICurvePool"}},"id":44610,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1138:6:20","memberName":"get_dy","nodeType":"MemberAccess","referencedDeclaration":44914,"src":"1128:16:20","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_int128_$_t_int128_$_t_uint256_$returns$_t_uint256_$","typeString":"function (int128,int128,uint256) view external returns (uint256)"}},"id":44614,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1128:30:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":44576,"id":44615,"nodeType":"Return","src":"1121:37:20"}]},"baseFunctions":[45018],"functionSelector":"75075ad5","implemented":true,"kind":"function","modifiers":[],"name":"getSpotPrice","nameLocation":"634:12:20","overrides":{"id":44573,"nodeType":"OverrideSpecifier","overrides":[],"src":"735:8:20"},"parameters":{"id":44572,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44567,"mutability":"mutable","name":"token","nameLocation":"664:5:20","nodeType":"VariableDeclaration","scope":44617,"src":"656:13:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":44566,"name":"address","nodeType":"ElementaryTypeName","src":"656:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":44569,"mutability":"mutable","name":"pool","nameLocation":"687:4:20","nodeType":"VariableDeclaration","scope":44617,"src":"679:12:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":44568,"name":"address","nodeType":"ElementaryTypeName","src":"679:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":44571,"mutability":"mutable","name":"quoteToken","nameLocation":"709:10:20","nodeType":"VariableDeclaration","scope":44617,"src":"701:18:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":44570,"name":"address","nodeType":"ElementaryTypeName","src":"701:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"646:79:20"},"returnParameters":{"id":44576,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44575,"mutability":"mutable","name":"price","nameLocation":"761:5:20","nodeType":"VariableDeclaration","scope":44617,"src":"753:13:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44574,"name":"uint256","nodeType":"ElementaryTypeName","src":"753:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"752:15:20"},"scope":44668,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":44667,"nodeType":"FunctionDefinition","src":"1171:449:20","nodes":[],"body":{"id":44666,"nodeType":"Block","src":"1258:362:20","nodes":[],"statements":[{"assignments":[44628],"declarations":[{"constant":false,"id":44628,"mutability":"mutable","name":"coinIdx","nameLocation":"1276:7:20","nodeType":"VariableDeclaration","scope":44666,"src":"1268:15:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"},"typeName":{"id":44627,"name":"uint128","nodeType":"ElementaryTypeName","src":"1268:7:20","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"visibility":"internal"}],"id":44630,"initialValue":{"hexValue":"30","id":44629,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1286:1:20","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"nodeType":"VariableDeclarationStatement","src":"1268:19:20"},{"body":{"id":44660,"nodeType":"Block","src":"1317:254:20","statements":[{"clauses":[{"block":{"id":44651,"nodeType":"Block","src":"1379:114:20","statements":[{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":44643,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44641,"name":"coin","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44639,"src":"1401:4:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"id":44642,"name":"token","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44622,"src":"1409:5:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"1401:13:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":44650,"nodeType":"IfStatement","src":"1397:82:20","trueBody":{"id":44649,"nodeType":"Block","src":"1416:63:20","statements":[{"expression":{"arguments":[{"id":44646,"name":"coinIdx","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44628,"src":"1452:7:20","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint128","typeString":"uint128"}],"id":44645,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"1445:6:20","typeDescriptions":{"typeIdentifier":"t_type$_t_int128_$","typeString":"type(int128)"},"typeName":{"id":44644,"name":"int128","nodeType":"ElementaryTypeName","src":"1445:6:20","typeDescriptions":{}}},"id":44647,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1445:15:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"functionReturnParameters":44626,"id":44648,"nodeType":"Return","src":"1438:22:20"}]}}]},"errorName":"","id":44652,"nodeType":"TryCatchClause","parameters":{"id":44640,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44639,"mutability":"mutable","name":"coin","nameLocation":"1373:4:20","nodeType":"VariableDeclaration","scope":44652,"src":"1365:12:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":44638,"name":"address","nodeType":"ElementaryTypeName","src":"1365:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"1364:14:20"},"src":"1356:137:20"},{"block":{"id":44654,"nodeType":"Block","src":"1500:38:20","statements":[{"id":44653,"nodeType":"Break","src":"1518:5:20"}]},"errorName":"","id":44655,"nodeType":"TryCatchClause","src":"1494:44:20"}],"externalCall":{"arguments":[{"id":44636,"name":"coinIdx","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44628,"src":"1347:7:20","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint128","typeString":"uint128"}],"expression":{"id":44634,"name":"pool","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44620,"src":"1336:4:20","typeDescriptions":{"typeIdentifier":"t_contract$_ICurvePool_$45003","typeString":"contract ICurvePool"}},"id":44635,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1341:5:20","memberName":"coins","nodeType":"MemberAccess","referencedDeclaration":44847,"src":"1336:10:20","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_uint256_$returns$_t_address_$","typeString":"function (uint256) view external returns (address)"}},"id":44637,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1336:19:20","tryCall":true,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":44656,"nodeType":"TryStatement","src":"1332:206:20"},{"expression":{"id":44658,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"++","prefix":false,"src":"1551:9:20","subExpression":{"id":44657,"name":"coinIdx","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44628,"src":"1551:7:20","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":44659,"nodeType":"ExpressionStatement","src":"1551:9:20"}]},"condition":{"commonType":{"typeIdentifier":"t_uint128","typeString":"uint128"},"id":44633,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44631,"name":"coinIdx","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44628,"src":"1304:7:20","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"hexValue":"38","id":44632,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1314:1:20","typeDescriptions":{"typeIdentifier":"t_rational_8_by_1","typeString":"int_const 8"},"value":"8"},"src":"1304:11:20","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":44661,"nodeType":"WhileStatement","src":"1297:274:20"},{"expression":{"arguments":[{"hexValue":"546f6b656e206e6f7420666f756e6420696e20706f6f6c","id":44663,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1587:25:20","typeDescriptions":{"typeIdentifier":"t_stringliteral_e31199ef32a16af0ba9ac84d3033592bb18162b307e1b8bb697aa8f6e1f80823","typeString":"literal_string \"Token not found in pool\""},"value":"Token not found in pool"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_stringliteral_e31199ef32a16af0ba9ac84d3033592bb18162b307e1b8bb697aa8f6e1f80823","typeString":"literal_string \"Token not found in pool\""}],"id":44662,"name":"revert","nodeType":"Identifier","overloadedDeclarations":[-19,-19],"referencedDeclaration":-19,"src":"1580:6:20","typeDescriptions":{"typeIdentifier":"t_function_revert_pure$_t_string_memory_ptr_$returns$__$","typeString":"function (string memory) pure"}},"id":44664,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1580:33:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":44665,"nodeType":"ExpressionStatement","src":"1580:33:20"}]},"implemented":true,"kind":"function","modifiers":[],"name":"findTokenIndex","nameLocation":"1180:14:20","parameters":{"id":44623,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44620,"mutability":"mutable","name":"pool","nameLocation":"1206:4:20","nodeType":"VariableDeclaration","scope":44667,"src":"1195:15:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_ICurvePool_$45003","typeString":"contract ICurvePool"},"typeName":{"id":44619,"nodeType":"UserDefinedTypeName","pathNode":{"id":44618,"name":"ICurvePool","nameLocations":["1195:10:20"],"nodeType":"IdentifierPath","referencedDeclaration":45003,"src":"1195:10:20"},"referencedDeclaration":45003,"src":"1195:10:20","typeDescriptions":{"typeIdentifier":"t_contract$_ICurvePool_$45003","typeString":"contract ICurvePool"}},"visibility":"internal"},{"constant":false,"id":44622,"mutability":"mutable","name":"token","nameLocation":"1220:5:20","nodeType":"VariableDeclaration","scope":44667,"src":"1212:13:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":44621,"name":"address","nodeType":"ElementaryTypeName","src":"1212:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"1194:32:20"},"returnParameters":{"id":44626,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44625,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":44667,"src":"1250:6:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"},"typeName":{"id":44624,"name":"int128","nodeType":"ElementaryTypeName","src":"1250:6:20","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"visibility":"internal"}],"src":"1249:8:20"},"scope":44668,"stateMutability":"view","virtual":false,"visibility":"internal"}],"abstract":false,"baseContracts":[{"baseName":{"id":44564,"name":"ISpotPriceOracle","nameLocations":["457:16:20"],"nodeType":"IdentifierPath","referencedDeclaration":45019,"src":"457:16:20"},"id":44565,"nodeType":"InheritanceSpecifier","src":"457:16:20"}],"canonicalName":"CurvePoolSpotPriceOracle","contractDependencies":[],"contractKind":"contract","fullyImplemented":true,"linearizedBaseContracts":[44668,45019],"name":"CurvePoolSpotPriceOracle","nameLocation":"429:24:20","scope":44669,"usedErrors":[],"usedEvents":[]}],"license":"UNLICENSED"},"id":20}